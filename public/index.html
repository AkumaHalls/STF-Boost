<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Controle - STF Steam Boost</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="control-panel">
        <header>
            <h1>STF Steam Boost</h1>
        </header>

        <div class="accounts-table">
            <table>
                <thead>
                    <tr>
                        <th>Usuário</th>
                        <th>Status</th>
                        <th>Tempo Restante</th>
                        <th>Iniciar/Parar</th>
                        <th>Steam Guard</th>
                        <th>Jogos</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>minha-conta-steam</td>
                        <td class="status-stopped">Parado</td>
                        <td>Ilimitado</td>
                        <td><button id="startButton" class="start-btn">Iniciar</button></td>
                        <td><button id="guardButton" class="enter-btn">Inserir</button></td>
                        <td><button class="manage-btn">Gerir</button></td>
                        <td><button class="settings-btn">Configurações</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        const startButton = document.getElementById('startButton');
        const guardButton = document.getElementById('guardButton'); // Encontra o novo botão

        // Evento para o botão INICIAR
        startButton.addEventListener('click', () => {
            fetch('/start', { method: 'POST' })
                .then(response => response.json())
                .then(data => alert(data.message))
                .catch(error => console.error('Erro ao iniciar:', error));
        });

        // NOVO Evento para o botão INSERIR (Steam Guard)
        guardButton.addEventListener('click', () => {
            // Abre uma caixa de diálogo para pedir o código
            const code = prompt('Por favor, insira o código do Steam Guard:');

            if (code) { // Se o usuário inseriu um código e não cancelou
                fetch('/submit-guard', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ code: code }) // Envia o código para o servidor
                })
                .then(response => response.json())
                .then(data => alert(data.message))
                .catch(error => console.error('Erro ao enviar código:', error));
            }
        });
    </script>
</body>
</html>
